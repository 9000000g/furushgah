SELECT q1.*,SUM( IF( f.follower != q1.user, f.trust, 0 ) ) AS trust_sum FROM (SELECT t1.*,COUNT(fa.id) AS i_favorite FROM (SELECT t1.*,COUNT(fa.id) AS favorites_count FROM (SELECT t1.*,COUNT(c.id) AS i_comment FROM (SELECT t1.*,COUNT(c.id) AS comments_count FROM (SELECT s.*,u.alias AS user_alias FROM sales s INNER JOIN users u ON s.user = u.id WHERE s.id = 22 GROUP BY s.id) t1 LEFT JOIN comments c ON c.sale = t1.id GROUP BY t1.id) t1 LEFT JOIN comments c ON c.sale = t1.id AND c.user = 1 GROUP BY t1.id) t1 LEFT JOIN favorites fa ON fa.sale = t1.id GROUP BY t1.id) t1 LEFT JOIN favorites fa ON fa.sale = t1.id AND fa.user = 1 GROUP BY t1.id) q1 LEFT JOIN followers f ON f.following = q1.user AND f.follower IN (SELECT following FROM followers WHERE follower = 1 AND trust >= 3) AND f.trust > -1 GROUP BY q1.id;